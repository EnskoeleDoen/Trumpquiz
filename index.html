<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Robin Quiz</title>
    <style>
        /* Jouw CSS hier */
    </style>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <!-- Jouw quiz HTML hier -->
    </div>

    <script>
        // ========================
        // FIREBASE CONFIGURATIE
        // ========================
        const firebaseConfig = {
            apiKey: "AIzaSyB170btCZ5e4OKIDUToAPF445Ima-3H208",
            authDomain: "quiz-robin.firebaseapp.com",
            projectId: "quiz-robin",
            storageBucket: "quiz-robin.firebasestorage.app",
            messagingSenderId: "233143883084",
            appId: "1:233143883084:web:372c88f5044cf99df7ebe9"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        // ========================
        // QUIZ VARIABELEN
        // ========================
        let currentQuestion = 0;
        let score = 0;
        const questions = [
            {
                question: "Wat is mijn geboorteplaats?",
                options: ["Wilrijk", "Willebroek", "Boom", "Schelle"],
                correct: 0
            },
            {
                question: "Hoe lang heb ik muziekschool gedaan?",
                options: ["6 jaar", "7 jaar", "8 jaar", "9 jaar"],
                correct: 2
            },
            {
                question: "Welk huisdier heb ik?",
                options: ["Hond", "Kat", "Vissen", "Konijn"],
                correct: 1
            }
        ];

        // ========================
        // QUIZ FUNCTIES
        // ========================
        function startQuiz() {
            document.querySelector('.start-screen').style.display = 'none';
            document.querySelector('.quiz-container').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            const options = document.getElementById('options');
            options.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.textContent = option;
                div.onclick = () => selectOption(index);
                options.appendChild(div);
            });
            
            updateProgress();
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
        }

        function nextQuestion() {
            const selected = document.querySelector('.selected');
            if (!selected) return;

            const correct = questions[currentQuestion].correct;
            if (selected.textContent === questions[currentQuestion].options[correct]) {
                score += 10;
            }

            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / questions.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        // ========================
        // LEADERBOARD FUNCTIES
        // ========================
        async function addToLeaderboard(name, score) {
            try {
                await db.collection("leaderboard").add({
                    name: name,
                    score: score,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
            } catch (error) {
                console.error("Fout bij opslaan:", error);
            }
        }

        function showLeaderboard() {
            db.collection("leaderboard")
                .orderBy("score", "desc")
                .limit(10)
                .onSnapshot((snapshot) => {
                    const ol = document.getElementById('leaderboard');
                    ol.innerHTML = snapshot.docs
                        .map(doc => `<li>${doc.data().name}: ${doc.data().score} punten</li>`)
                        .join('');
                });
        }

        function endQuiz() {
            document.querySelector('.quiz-container').style.display = 'none';
            const name = prompt("Quiz voltooid! Je score: " + score + "\nVoer je naam in voor het leaderboard:");
            addToLeaderboard(name || "Anoniem", score);
            showLeaderboard();
            resetQuiz();
        }

        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            document.querySelector('.start-screen').style.display = 'block';
            document.getElementById('progress').style.width = '0%';
        }

        // ========================
        // INITIALISATIE
        // ========================
        document.addEventListener('DOMContentLoaded', () => {
            showLeaderboard();
        });
    </script>
</body>
</html>