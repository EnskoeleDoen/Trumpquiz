<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Robin Quiz</title>
    <style>
        /* CSS-code uit je originele werkende versie */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        /* ... behoud alle originele CSS-stijlen ... */
    </style>
    
    <!-- Firebase SDKs (CRUCIAAL) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <div class="start-screen">
            <h1>Robin Quiz</h1>
            <img src="robin-profile.jpg" alt="Robin" class="profile-img">
            <button class="btn" onclick="startQuiz()">Start Quiz</button>
        </div>

        <div class="quiz-container">
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <button class="btn" onclick="nextQuestion()" id="nextBtn">Volgende</button>
        </div>

        <div class="leaderboard">
            <h2>Leaderboard</h2>
            <ol id="leaderboard"></ol>
        </div>
    </div>

    <script>
        // ================ FIREBASE CONFIG ================
        const firebaseConfig = {
            apiKey: "AIzaSyB170btCZ5e4OKIDUToAPF445Ima-3H208",
            authDomain: "quiz-robin.firebaseapp.com",
            projectId: "quiz-robin",
            storageBucket: "quiz-robin.firebasestorage.app",
            messagingSenderId: "233143883084",
            appId: "1:233143883084:web:372c88f5044cf99df7ebe9"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        // ================ QUIZ VARIABELEN ================
        let currentQuestion = 0;
        let score = 0;
        const questions = [
            {
                question: "Wat is mijn geboorteplaats?",
                options: ["Wilrijk", "Willebroek", "Boom", "Schelle"],
                correct: 0
            },
            {
                question: "Hoe lang heb ik muziekschool gedaan?",
                options: ["6 jaar", "7 jaar", "8 jaar", "9 jaar"],
                correct: 2
            },
            {
                question: "Welk huisdier heb ik?",
                options: ["Hond", "Kat", "Vissen", "Konijn"],
                correct: 1
            }
        ];

        // ================ QUIZ FUNCTIES ================
        function startQuiz() {
            document.querySelector('.start-screen').style.display = 'none';
            document.querySelector('.quiz-container').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            const options = document.getElementById('options');
            options.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.textContent = option;
                div.onclick = () => selectOption(index);
                options.appendChild(div);
            });
            
            updateProgress();
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
        }

        function nextQuestion() {
            const selected = document.querySelector('.selected');
            if (!selected) {
                alert("Selecteer eerst een antwoord!");
                return;
            }

            const correctIndex = questions[currentQuestion].correct;
            if (selected.textContent === questions[currentQuestion].options[correctIndex]) {
                score += 10;
            }

            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / questions.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        // ================ LEADERBOARD ================
        async function addToLeaderboard(name, score) {
            try {
                await db.collection("leaderboard").add({
                    name: name,
                    score: score,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
            } catch (error) {
                console.error("Fout bij opslaan:", error);
                alert("Kon score niet opslaan. Controleer je internetverbinding!");
            }
        }

        function showLeaderboard() {
            db.collection("leaderboard")
                .orderBy("score", "desc")
                .limit(10)
                .onSnapshot((snapshot) => {
                    const leaderboard = document.getElementById('leaderboard');
                    leaderboard.innerHTML = snapshot.docs
                        .map(doc => `<li>${doc.data().name}: ${doc.data().score} punten</li>`)
                        .join('');
                }, (error) => {
                    console.error("Leaderboard fout:", error);
                });
        }

        function endQuiz() {
            document.querySelector('.quiz-container').style.display = 'none';
            const name = prompt(`Quiz voltooid! Score: ${score}\nVoer je naam in:`);
            if (name) {
                addToLeaderboard(name, score);
            }
            showLeaderboard();
            resetQuiz();
        }

        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            document.querySelector('.start-screen').style.display = 'block';
            document.getElementById('progress').style.width = '0%';
        }

        // ================ INITIALISATIE ================
        document.addEventListener('DOMContentLoaded', () => {
            showLeaderboard();
        });
    </script>
</body>
</html>