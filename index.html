<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Robin Quiz</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e1e2f, #2c2c3d);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 90%;
            max-width: 500px;
            background: #3a3a4d;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 10px 0;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
            transition: 0.3s;
            display: inline-block;
        }

        .btn:hover {
            background: #0056b3;
        }

        .quiz-container, .leaderboard {
            display: none;
        }

        .option {
            background: #4a4a6d;
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

        .option:hover {
            background: #626289;
        }

        .option.selected {
            background: #007bff;
            color: white;
            font-weight: bold;
        }

        .progress-bar {
            background: #444;
            width: 100%;
            height: 10px;
            border-radius: 5px;
            margin-top: 10px;
            position: relative;
        }

        .progress {
            height: 100%;
            background: #007bff;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s;
        }

        .leaderboard ol {
            padding: 0;
            list-style-type: none;
        }

        .leaderboard li {
            background: #626289;
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
        }

        .reset-btn {
            background: #dc3545;
            padding: 8px;
        }

        .reset-btn:hover {
            background: #a71d2a;
        }
    </style>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <div class="start-screen">
            <h1>Robin Quiz</h1>
            <button class="btn" onclick="startQuiz()">Start Quiz</button>
        </div>

        <div class="quiz-container">
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <button class="btn" onclick="nextQuestion()" id="nextBtn">Volgende</button>
        </div>

        <div class="leaderboard">
            <h2>Leaderboard</h2>
            <ol id="leaderboard"></ol>
            <button class="btn reset-btn" onclick="resetLeaderboard()">Reset Leaderboard</button>
        </div>
    </div>

    <script>
        // ========== FIREBASE CONFIG ==========
        const firebaseConfig = {
            apiKey: "AIzaSyB170btCZ5e4OKIDUToAPF445Ima-3H208",
            authDomain: "quiz-robin.firebaseapp.com",
            projectId: "quiz-robin",
            storageBucket: "quiz-robin.firebasestorage.app",
            messagingSenderId: "233143883084",
            appId: "1:233143883084:web:372c88f5044cf99df7ebe9"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        // ========== QUIZ VARIABELEN ==========
        let currentQuestion = 0;
        let score = 0;
        const questions = [
            { question: "Wat is mijn geboorteplaats?", options: ["Wilrijk", "Willebroek", "Boom", "Schelle"], correct: 0 },
            { question: "Hoe lang heb ik muziekschool gedaan?", options: ["6 jaar", "7 jaar", "8 jaar", "9 jaar"], correct: 2 },
            { question: "Welk huisdier heb ik?", options: ["Hond", "Kat", "Vissen", "Konijn"], correct: 1 }
        ];

        function startQuiz() {
            document.querySelector('.start-screen').style.display = 'none';
            document.querySelector('.quiz-container').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            const options = document.getElementById('options');
            options.innerHTML = '';

            question.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.textContent = option;
                div.onclick = () => selectOption(index);
                options.appendChild(div);
            });

            updateProgress();
        }

        function selectOption(index) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.option')[index].classList.add('selected');
        }

        function nextQuestion() {
            const selected = document.querySelector('.selected');
            if (!selected) {
                alert("Selecteer eerst een antwoord!");
                return;
            }

            if (selected.textContent === questions[currentQuestion].options[questions[currentQuestion].correct]) {
                score += 10;
            }

            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function updateProgress() {
            document.getElementById('progress').style.width = `${(currentQuestion / questions.length) * 100}%`;
        }

        async function addToLeaderboard(name, score) {
            try {
                await db.collection("leaderboard").add({ name, score, timestamp: firebase.firestore.FieldValue.serverTimestamp() });
            } catch (error) {
                console.error("Fout bij opslaan:", error);
            }
        }

        function showLeaderboard() {
            document.querySelector('.quiz-container').style.display = 'none';
            document.querySelector('.leaderboard').style.display = 'block';

            db.collection("leaderboard").orderBy("score", "desc").limit(10).onSnapshot(snapshot => {
                document.getElementById('leaderboard').innerHTML = snapshot.docs
                    .map(doc => `<li>${doc.data().name}: ${doc.data().score} punten</li>`)
                    .join('');
            });
        }

        function endQuiz() {
            const name = prompt(`Quiz voltooid! Score: ${score}\nVoer je naam in:`);
            if (name) addToLeaderboard(name, score);
            showLeaderboard();
        }

        function resetLeaderboard() {
            db.collection("leaderboard").get().then(snapshot => {
                snapshot.forEach(doc => doc.ref.delete());
            });
        }

        document.addEventListener('DOMContentLoaded', showLeaderboard);
    </script>
</body>
</html>